@model CCIA.Models.AdminVarietyDetailsViewModel


<div class="container col-sm-12">    
    <div class="row">
        <div class="col-sm-12">
            <h2>Edit Variety Details</h2> 
        </div>            
    </div>              
    <div class="row">
        <div class="col-sm-12">  
            <div asp-validation-summary="All" class="text-danger"></div>                 
            <a asp-action="Details" asp-route-id="@Model.variety.Id" class="btn btn-dark">Cancel</a>
        </div>            
    </div>          
    <div class="row"> 
        <div class="col-md-6 col-xl-4"> @* First column *@
            <div class="form-group row">
                <label asp-for="variety.Id" class="col-sm-3 col-form-label"></label>
                <div class="col-sm-9 form-control-plaintext">
                    @Html.DisplayFor(x => x.variety.Id)
                </div>
            </div>    
            <div class="form-group row">
                <label asp-for="variety.Crop.Name" class="col-sm-3 col-form-label"></label>               
                <select required asp-for="variety.CropId" class="col-sm-4 form-control" asp-items="@(new SelectList(Model.crops, "CropId", "Name"))"></select>
            </div>  
            @if(Model.variety.Type != "official")
            {
                <div class="form-group row">
                    <label asp-for="variety.VarietyOfficial.VarOffId" class="col-sm-3 col-form-label">Parent ID</label>
                    <div class="col-sm-9 form-control-plaintext">
                        <a asp-action="Details" asp-route-id="@Model.variety.ParentId">@Model.variety.ParentId</a>
                    </div>
                </div> 
                <div class="form-group row">
                    <label asp-for="variety.VarietyOfficial.OECD" class="col-sm-3 col-form-label"></label>
                    <input type="checkbox" asp-for="variety.VarietyFamily.OECD.Value" class="col-sm-3 form-control">
                </div>
                <div class="form-group row">
                    <label asp-for="variety.VarietyOfficial.PrivateCode" class="col-sm-3 col-form-label"></label>
                    <input type="checkbox" asp-for="variety.VarietyFamily.PrivateCode.Value" class="col-sm-3 form-control">
                </div>
            } else
            {
                <div class="form-group row">
                    <label asp-for="variety.VarietyOfficial.VarCategory" class="col-sm-3 col-form-label"></label>                    
                    <select required asp-for="variety.VarietyOfficial.VarCategory" class="col-sm-2 form-control" asp-items="@(new SelectList(Model.categories))"></select>
                </div>
                <div class="form-group row">
                    <label asp-for="variety.VarietyOfficial.OECD" class="col-sm-3 col-form-label"></label>
                    <input type="checkbox" asp-for="variety.VarietyOfficial.OECD.Value" class="col-sm-3 form-control">
                </div>
                <div class="form-group row">
                    <label asp-for="variety.VarietyOfficial.CCIACertified" class="col-sm-3 col-form-label"></label>
                    <input type="checkbox" asp-for="variety.VarietyOfficial.CCIACertified.Value" class="col-sm-3 form-control">
                </div>
                <div class="form-group row">
                    <label asp-for="variety.VarietyOfficial.PendingCertification" class="col-sm-3 col-form-label"></label>
                    <input type="checkbox" asp-for="variety.VarietyOfficial.PendingCertification.Value" class="col-sm-3 form-control">
                </div>
                <div class="form-group row">
                    <label asp-for="variety.VarietyOfficial.GermplasmEntity" class="col-sm-3 col-form-label"></label>
                    <input type="checkbox" asp-for="variety.VarietyOfficial.GermplasmEntity.Value" class="col-sm-3 form-control">
                </div>
                <div class="form-group row">
                    <label asp-for="variety.VarietyOfficial.PlantPatent" class="col-sm-3 col-form-label"></label>
                    <input type="checkbox" asp-for="variety.VarietyOfficial.PlantPatent.Value" class="col-sm-3 form-control">
                </div>
                <div class="form-group row">
                    <label asp-for="variety.VarietyOfficial.Pvp" class="col-sm-3 col-form-label"></label>
                    <input type="checkbox" asp-for="variety.VarietyOfficial.Pvp.Value" class="col-sm-3 form-control">
                </div>
                <div class="form-group row">
                    <label asp-for="variety.VarietyOfficial.PvpExpDate" class="col-sm-3 col-form-label"></label>
                    <div class="col-sm-9 input-group">
                        <input type="text" asp-for="variety.VarietyOfficial.PvpExpDate" class="col-sm-3 form-control datepicker">
                        <div class="input-group-append" onclick="$('.datepicker').focus();">             
                            <i class="fa fa-calendar input-group-text"></i>
                        </div>
                    </div> 
                    <span class="field-validation-valid text-danger" data-valmsg-for="variety.VarietyOfficial.PvpExpDate" data-valmsg-replace="true"></span>                   
                </div>
                <div class="form-group row">
                    <label asp-for="variety.VarietyOfficial.VarReviewBoard" class="col-sm-3 col-form-label"></label>
                    <input type="checkbox" asp-for="variety.VarietyOfficial.VarReviewBoard.Value" class="col-sm-3 form-control">
                </div>
                <div class="form-group row">
                    <label asp-for="variety.VarietyOfficial.RiceQa" class="col-sm-3 col-form-label"></label>
                    <input type="checkbox" asp-for="variety.VarietyOfficial.RiceQa.Value" class="col-sm-3 form-control">
                </div>
                <div class="form-group row">
                    <label asp-for="variety.VarietyOfficial.HistoricalName" class="col-sm-3 col-form-label"></label>
                    <input asp-for="variety.VarietyOfficial.HistoricalName" class="col-sm-8 col-form-label"></input>
                    <span class="field-validation-valid text-danger" data-valmsg-for="variety.VarietyOfficial.HistoricalName" data-valmsg-replace="true"></span>
                </div>
            }
        </div>
        <div class="col-md-6 col-xl-4"> @* Second column *@ 
            <div class="form-group row">
                <label asp-for="variety.Name" class="col-sm-3 col-form-label"></label>
                <input asp-for="variety.Name" class="col-sm-3 col-form-label"></input>
                <span class="field-validation-valid text-danger" data-valmsg-for="variety.Name" data-valmsg-replace="true"></span>
            </div>  
            <div class="form-group row">
                <label asp-for="variety.Crop.Genus" class="col-sm-3 col-form-label"></label>
                <div class="col-sm-9 form-control-plaintext">
                    @Html.DisplayFor(x => x.variety.Crop.Genus)
                </div>
            </div> 
            @if(Model.variety.Type != "official")
            { 
                <div class="form-group row">
                    <label asp-for="variety.VarietyOfficial.VarOffName" class="col-sm-3 col-form-label">Parent Name</label>
                    <div class="col-sm-9 form-control-plaintext">
                        @Html.DisplayFor(x => x.variety.VarietyOfficial.VarOffName)
                    </div>
                </div>
                <div class="form-group row">
                    <label asp-for="variety.VarietyOfficial.Experimental" class="col-sm-3 col-form-label"></label>
                    <input type="checkbox" asp-for="variety.VarietyFamily.Experimental.Value" class="col-sm-3 form-control">
                </div>
                <div class="form-group row">
                    <label asp-for="variety.VarietyOfficial.Confidential" class="col-sm-3 col-form-label"></label>
                    <input type="checkbox" asp-for="variety.VarietyFamily.Confidential.Value" class="col-sm-3 form-control">
                </div>                
            }  else
            {
                <div class="form-group row">
                    <label asp-for="variety.VarietyOfficial.PrivateCode" class="col-sm-3 col-form-label"></label>
                    <input type="checkbox" asp-for="variety.VarietyOfficial.PrivateCode.Value" class="col-sm-3 form-control">
                </div>
                <div class="form-group row">
                    <label asp-for="variety.VarietyOfficial.Confidential" class="col-sm-3 col-form-label"></label>
                    <input type="checkbox" asp-for="variety.VarietyOfficial.Confidential.Value" class="col-sm-3 form-control">
                </div>                
                <div class="form-group row">
                    <label asp-for="variety.VarietyOfficial.CCIACertifiedDate" class="col-sm-3 col-form-label"></label>
                    <div class="col-sm-9 input-group">
                        <input type="text" asp-for="variety.VarietyOfficial.CCIACertifiedDate" class="col-sm-3 form-control datepicker">
                        <div class="input-group-append" onclick="$('.datepicker').focus();">             
                            <i class="fa fa-calendar input-group-text"></i>
                        </div>
                    </div> 
                    <span class="field-validation-valid text-danger" data-valmsg-for="variety.VarietyOfficial.CCIACertifiedDate" data-valmsg-replace="true"></span>                   
                </div>
                <div class="form-group row">
                    <label asp-for="variety.VarietyOfficial.Active" class="col-sm-3 col-form-label"></label>
                    <input type="checkbox" asp-for="variety.VarietyOfficial.Active.Value" class="col-sm-3 form-control">
                </div>
                <div class="form-group row">
                    <label asp-for="variety.VarietyOfficial.CtcApproved" class="col-sm-3 col-form-label"></label>
                    <input type="checkbox" asp-for="variety.VarietyOfficial.CtcApproved.Value" class="col-sm-3 form-control">
                </div>
                <div class="form-group row">
                    <label asp-for="variety.VarietyOfficial.PlantPatentNum" class="col-sm-3 col-form-label"></label>
                    <input asp-for="variety.VarietyOfficial.PlantPatentNum" class="col-sm-3 col-form-label"></input>
                    <span class="field-validation-valid text-danger" data-valmsg-for="variety.VarietyOfficial.PlantPatentNum" data-valmsg-replace="true"></span>
                </div>                
                <div class="form-group row">
                    <label asp-for="variety.VarietyOfficial.PvpDate" class="col-sm-3 col-form-label"></label>
                    <div class="col-sm-9 input-group">
                        <input type="text" asp-for="variety.VarietyOfficial.PvpDate" class="col-sm-3 form-control datepicker">
                        <div class="input-group-append" onclick="$('.datepicker').focus();">             
                            <i class="fa fa-calendar input-group-text"></i>
                        </div>
                    </div> 
                    <span class="field-validation-valid text-danger" data-valmsg-for="variety.VarietyOfficial.PvpDate" data-valmsg-replace="true"></span>                   
                </div>                
                <div class="form-group row">
                    <label asp-for="variety.VarietyOfficial.PvpYears" class="col-sm-3 col-form-label"></label>
                    <input asp-for="variety.VarietyOfficial.PvpYears" class="col-sm-3 col-form-label"></input>
                    <span class="field-validation-valid text-danger" data-valmsg-for="variety.VarietyOfficial.PvpYears" data-valmsg-replace="true"></span>
                </div>
                <div class="form-group row">
                    <label asp-for="variety.VarietyOfficial.VarReviewBoardDate" class="col-sm-3 col-form-label"></label>
                    <div class="col-sm-9 input-group">
                        <input type="text" asp-for="variety.VarietyOfficial.VarReviewBoardDate" class="col-sm-3 form-control datepicker">
                        <div class="input-group-append" onclick="$('.datepicker').focus();">             
                            <i class="fa fa-calendar input-group-text"></i>
                        </div>
                    </div> 
                    <span class="field-validation-valid text-danger" data-valmsg-for="variety.VarietyOfficial.VarReviewBoardDate" data-valmsg-replace="true"></span>                   
                </div>
                <div class="form-group row">
                    <label asp-for="variety.VarietyOfficial.RiceQaColor" class="col-sm-3 col-form-label"></label>
                    <select required asp-for="variety.VarietyOfficial.VarStatus" class="col-sm-2 form-control">
                        <option value=""></option>
                        <option value="Colored">Colored</option>
                    </select>                   
                </div>               
            }
        </div>
        <div class="col-md-6 col-xl-4"> @* Third Col *@ 
            <div class="form-group row">
                <label class="col-sm-3 col-form-label">Type</label>
                <div class="col-sm-9 form-control-plaintext">
                    @if(Model.variety.Type != "official")
                    {
                        <span>Family</span>
                    } else
                    {
                        <span>Official</span>
                    }
                </div>
            </div>
            <div class="form-group row">
                <label asp-for="variety.Crop.Species" class="col-sm-3 col-form-label"></label>
                <div class="col-sm-9 form-control-plaintext">
                    @Html.DisplayFor(x => x.variety.Crop.Species)
                </div>
            </div>
            @if(Model.variety.Type != "official") 
            {
                <div class="form-group row">
                    <label asp-for="variety.VarietyFamily.InUse" class="col-sm-3 col-form-label"></label>
                    <input type="checkbox" asp-for="variety.VarietyFamily.InUse.Value" class="col-sm-3 form-control">
                </div>
                <div class="form-group row">
                    <label asp-for="variety.VarietyFamily.Alias" class="col-sm-3 col-form-label"></label>
                    <input type="checkbox" asp-for="variety.VarietyFamily.Alias.Value" class="col-sm-3 form-control">
                </div>
                <div class="form-group row">
                    <label asp-for="variety.VarietyFamily.VarietyType" class="col-sm-3 col-form-label"></label>
                    <div class="col-sm-9 form-control-plaintext">
                        @Html.DisplayFor(x => x.variety.VarietyFamily.VarietyType)
                    </div>
                </div>  
            } else
            {
                <div class="form-group row">
                    <label asp-for="variety.VarietyOfficial.Experimental" class="col-sm-3 col-form-label"></label>
                    <input type="checkbox" asp-for="variety.VarietyOfficial.Experimental.Value" class="col-sm-3 form-control">
                </div>
                <div class="form-group row">
                    <label asp-for="variety.VarietyOfficial.VarStatus" class="col-sm-3 col-form-label"></label>                    
                    <select required asp-for="variety.VarietyOfficial.VarStatus" class="col-sm-2 form-control" asp-items="@(new SelectList(Model.statuses))"></select>
                </div>
                <div class="form-group row">
                    <label asp-for="variety.VarietyOfficial.CCIACertifier" class="col-sm-3 col-form-label"></label>
                    <input asp-for="variety.VarietyOfficial.CCIACertifier" class="col-sm-8 col-form-label"></input>
                    <span class="field-validation-valid text-danger" data-valmsg-for="variety.VarietyOfficial.CCIACertifier" data-valmsg-replace="true"></span>
                </div>
                 <div class="form-group row">
                    <label asp-for="variety.VarietyOfficial.DescriptionOnFile" class="col-sm-3 col-form-label"></label>
                    <input type="checkbox" asp-for="variety.VarietyOfficial.DescriptionOnFile.Value" class="col-sm-3 form-control">
                </div>   
                <div class="form-group row">
                    <label asp-for="variety.VarietyOfficial.CtcDateApproved" class="col-sm-3 col-form-label"></label>
                    <div class="col-sm-9 input-group">
                        <input type="text" asp-for="variety.VarietyOfficial.CtcDateApproved" class="col-sm-3 form-control datepicker">
                        <div class="input-group-append" onclick="$('.datepicker').focus();">             
                            <i class="fa fa-calendar input-group-text"></i>
                        </div>
                    </div> 
                    <span class="field-validation-valid text-danger" data-valmsg-for="variety.VarietyOfficial.CtcDateApproved" data-valmsg-replace="true"></span>                   
                </div>
                <div class="form-group row">
                    <label asp-for="variety.VarietyOfficial.PlantPatentDate" class="col-sm-3 col-form-label"></label>
                    <div class="col-sm-9 input-group">
                        <input type="text" asp-for="variety.VarietyOfficial.PlantPatentDate" class="col-sm-3 form-control datepicker">
                        <div class="input-group-append" onclick="$('.datepicker').focus();">             
                            <i class="fa fa-calendar input-group-text"></i>
                        </div>
                    </div> 
                    <span class="field-validation-valid text-danger" data-valmsg-for="variety.VarietyOfficial.PlantPatentDate" data-valmsg-replace="true"></span>                   
                </div>                                            
                <div class="form-group row">
                    <label asp-for="variety.VarietyOfficial.PvpNumber" class="col-sm-3 col-form-label"></label>
                    <input asp-for="variety.VarietyOfficial.PvpNumber" class="col-sm-3 col-form-label"></input>
                    <span class="field-validation-valid text-danger" data-valmsg-for="variety.VarietyOfficial.PvpNumber" data-valmsg-replace="true"></span>                    
                </div>
                <div class="form-group row">
                    <label asp-for="variety.VarietyOfficial.TitleV" class="col-sm-3 col-form-label"></label>
                    <input type="checkbox" asp-for="variety.VarietyOfficial.TitleV.Value" class="col-sm-3 form-control">
                </div>
                <div class="form-group row">
                    <label asp-for="variety.VarietyOfficial.OtherStateCert" class="col-sm-3 col-form-label"></label>
                    <input asp-for="variety.VarietyOfficial.OtherStateCert" class="col-sm-8 col-form-label"></input>
                    <span class="field-validation-valid text-danger" data-valmsg-for="variety.VarietyOfficial.OtherStateCert" data-valmsg-replace="true"></span>
                </div>
                <div class="form-group row">
                    <label asp-for="variety.VarietyOfficial.Turfgrass" class="col-sm-3 col-form-label"></label>
                    <input type="checkbox" asp-for="variety.VarietyOfficial.Turfgrass.Value" class="col-sm-3 form-control">
                </div>
                <div class="form-group row">
                    <label class="col-sm-3 col-form-label">Owner</label>
                     <input asp-for="variety.VarietyOfficial.OwnerId" class="col-sm-3 col-form-label"></input> @(@Model.variety.VarietyOfficial.OwnerOrganization != null ? @Model.variety.VarietyOfficial.OwnerOrganization.Name : "")
                    <span class="field-validation-valid text-danger" data-valmsg-for="variety.VarietyOfficial.OwnerId" data-valmsg-replace="true"></span>
                </div>
            }
        </div>
    </div>
    
    <div class="col-sm-12"><hr></div>
    <div><h4>Countries for Export</h4></div>
    @if(Model.variety.Countries.Any())
    {
    <div class="row col-sm-2">
        <table class="table">
            <tr>
                <th>Countries</th>
                <th></th>
            </tr>
            @foreach (var item in Model.variety.Countries)
            {
                <tr>
                    <td>@item.Country.Name</td>
                    <td><a asp-action="RemoveCountry" asp-route-country="@item.CountryId" asp-route-variety="@Model.variety.Id" class="btn btn-danger" onclick="return confirm('Really delete country for export?');" >Remove</a></td>
                </tr>                                
            }
        </table>        
    </div>    
    }
    <div class="col-sm-12">
        <a asp-action="AddCountry" asp-route-id="@Model.variety.Id" class="btn btn-primary">Add new Country</a>
    </div>
    <div class="col-sm-12"><hr></div>
    @if(@Model.variety.Type != "official")
    {
        <div class="row">
            <div class="col-sm-12">
                <div class="form-group row">
                    <label asp-for="variety.VarietyFamily.DescHyperlink" class="col-sm-1 col-form-label"></label>
                    <div class="col-sm-11 form-control-plaintext">
                        @Html.DisplayFor(x => x.variety.VarietyFamily.DescHyperlink)
                    </div>
                </div>
                <div class="form-group row">
                    <label asp-for="variety.VarietyFamily.VarComments" class="col-sm-1 col-form-label"></label>
                    <div class="col-sm-11 form-control-plaintext">
                        @Html.DisplayFor(x => x.variety.VarietyFamily.VarComments)
                    </div>
                </div> 
                <div class="form-group row">
                    <label asp-for="variety.VarietyFamily.UpdateComments" class="col-sm-1 col-form-label"></label>
                    <div class="col-sm-11 form-control-plaintext">
                        @Html.DisplayFor(x => x.variety.VarietyFamily.UpdateComments)
                    </div>
                </div>
            </div>
        </div>  
    } else
    {
        <div class="row">
            <div class="col-sm-12">
                <div class="form-group row">
                    <label class="col-sm-3 col-form-label">PVG G0 collection</label>
                    <div class="col-sm-9 form-control-plaintext">
                        EPA Ecoregion: @Model.variety.VarietyOfficial.Ecoregion @(Model.variety.VarietyOfficial.EcoRegionTranslate != null ? Model.variety.VarietyOfficial.EcoRegionTranslate.Name : "") 
                        Elevation: @Model.variety.VarietyOfficial.Elevation 
                        County: @(Model.variety.VarietyOfficial.HarvestCounty != null ? @Model.variety.VarietyOfficial.HarvestCounty.Name  : "")
                        State: @(Model.variety.VarietyOfficial.StateHarvested != null ?  @Model.variety.VarietyOfficial.StateHarvested.Name : "")
                    </div>
                </div>
                <div class="form-group row">
                    <label asp-for="variety.VarietyOfficial.DescHyperlink" class="col-sm-1 col-form-label"></label>
                    <div class="col-sm-11 form-control-plaintext">
                        @Html.DisplayFor(x => x.variety.VarietyOfficial.DescHyperlink)
                    </div>
                </div>
                <div class="form-group row">
                    <label asp-for="variety.VarietyOfficial.BriefDescription" class="col-sm-1 col-form-label"></label>
                    <div class="col-sm-11 form-control-plaintext">
                        @Html.DisplayFor(x => x.variety.VarietyOfficial.BriefDescription)
                    </div>
                </div> 
                <div class="form-group row">
                    <label asp-for="variety.VarietyOfficial.Comments" class="col-sm-1 col-form-label"></label>
                    <div class="col-sm-11 form-control-plaintext">
                        @Html.DisplayFor(x => x.variety.VarietyOfficial.Comments)
                    </div>
                </div>
            </div>
        </div>  
    }
    <div class="row">
        <div class="col-sm-12"><hr></div>
        <div >
            <h4>Variety Family info</h4>
            <table class="table">
                <thead>
                    <tr>
                        <td>Id</td>
                        <td>Name</td>
                        <td>Type</td>
                        <td></td>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var var in Model.familyInfo)
                    {
                        <tr>
                            <td>@var.Id</td>
                            <td>@var.Name</td>
                            <td>@var.Type</td>
                            <td><a asp-action="Details" asp-route-id="@var.Id" class="btn btn-info">Details</a></td>
                        </tr>                        
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>


@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    <script src="https://ajax.aspnetcdn.com/ajax/jquery.ui/1.12.1/jquery-ui.js"></script>   
    
     <script type="text/javascript">
        $(document).ready(function () {
            $('.datepicker').datepicker();
        });
    </script>
}